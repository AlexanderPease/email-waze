<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="{% block page-description %}{% end %}">
  <link rel="shortcut icon" href="{{ static_url("img/ansatz-favicon.png") }}" type="image/png" />
  <link href='//fonts.googleapis.com/css?family=Lato:300,400,400italic,700|Titillium+Web:600,400' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css">
  <link rel="stylesheet" href="//cdn.datatables.net/1.10.4/css/jquery.dataTables.min.css">
  <link href="{{ static_url("css/screen.css") }}" rel="stylesheet" type="text/css" />
</head>
<body>
  <script type="text/x-handlebars">
  <nav class="navbar navbar-default" role="navigation">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#main-navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand">Ansatz</a>
      </div>

      <div class="collapse navbar-collapse" id="main-navbar-collapse">
        <ul class="nav navbar-nav navbar-right">

          <li>{{!#link-to 'posts'}}Posts{{!/link-to}}</li>
          
          <li>{{!#link-to 'search'}}Search{{!/link-to}}</li>


          <li id="nav-chrome-extension" class="hidden"><a href="https://chrome.google.com/webstore/detail/ansatz/fhmfdjnooicibclghoophehldkeeloje">Install the Chrome Extension!</a></li>
          <li>{{!#link-to 'about'}}About{{!/link-to}}</li>
          <li><a href="http://ansatz.readme.io/v1.0/docs">API Docs</a></li>
          {% if not current_user %}
            <li><a href="/auth/google">Sign Up</a></li>
            <li><a href="/auth/google">Log In</a></li>
          {% else %}
            {% if current_user_staff() %}
              <li>{{!#link-to 'admin'}}Admin{{!/link-to}}</li>
            {% end %}
            <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Account <span class="caret"></span></a>
            <ul class="dropdown-menu" role="menu">
              <li><a href="/user/settings">Settings</a></li>
              <li><a href="/user/settings">Join a Team</a></li>
              <li class="divider"></li>
              {% if current_user %}
                <li><a href="/auth/logout/">Logout</a></li>
              {% end %}
            </ul>
          </li>
          {% end %}
        </ul>
      </div>
    </div>
  </nav>

  <main class="page-content">
    {{!outlet}}
  </main>

  <footer>
    <span>Made in New York City</span>
  </footer>
  </script>

  <script type="text/x-handlebars" id="index">
    {% include 'public/index.html' %}
  </script>

  <script type="text/x-handlebars" id="search">
    {% include 'public/search_empty.html' %}
  </script>

  <script type="text/x-handlebars" id="about">
    {% include 'public/about.html' %}
  </script>

  <script type="text/x-handlebars" id="admin">
    {% include 'admin/admin_home.html' %}
  </script>

  <script type="text/x-handlebars" id="posts">
    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span3">
          <table class='table'>
            <thead>
              <tr><th>Recent Posts</th></tr>
            </thead>

            <tbody>
              {{!#each model}}
                <tr>
                  <td>
                    {{!#link-to 'post' this}}{{!title}} <small class='muted'>by {{!author.name}}</small>{{!/link-to}}
                  </td>
                </tr>
              {{!/each}}
            </tbody>
          </table>
        </div>

        <div class="span9">
          {{!outlet}}
        </div>
      </div>
    </div>
  </script>

  <script type="text/x-handlebars" id="posts/index">
    <p class="text-warning">Please select a post</p>
  </script>

  <script type="text/x-handlebars" id="post">
    {{!#if isEditing}}
      {{!partial 'post/edit'}}
      <button {{!action 'doneEditing'}}>Done</button>
    {{!else}}
      <button {{!action 'edit'}}>Edit</button>
    {{!/if}}

    <h1>{{!title}}</h1>
    <h2>by {{!author.name}} <small class='muted'>({{!format-date date}})</small></h2>

    <hr>

    <div class='intro'>
      {{!format-markdown excerpt}}
    </div>

    <div class='below-the-fold'>
      {{!format-markdown body}}
    </div>
  </script>

  <script type="text/x-handlebars" id="post/_edit">
    <p>{{!input type="text" value=title}}</p>
    <p>{{!input type="text" value=excerpt}}</p>
    <p>{{!textarea value=body}}</p>
  </script>

  <script type="text/javascript" src="//code.jquery.com/jquery-1.10.1.min.js"></script>
  <script type="text/javascript" src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
  <script type="text/javascript" src="//cdn.datatables.net/1.10.4/js/jquery.dataTables.min.js"></script>
  <script src="{{ static_url("ember/libs/handlebars-v1.3.0.js") }}"></script>
  <script src="{{ static_url("ember/libs/ember-v1.6.1.js") }}"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/showdown/0.3.1/showdown.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.1.0/moment.min.js"></script>
  <script src="{{ static_url("ember/app.js") }}"></script>
</body>
</html>
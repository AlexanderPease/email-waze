{% extends "../base.html" %}

{% block body %}
  <div class="row">
    <div class="col-md-6">
      {{ err }}
      {{ msg }}

      {% if not current_user %}
        <h2>Welcome to Ansatz!</h2>

        <p>
          Ansatz is a simple way to find someone's email address while still respecting their privacy. 
          </br></br>
          It works like this:</br>
          If I search the database for "Alexander Pease" at "Union Square Ventures", I'll find an entry for 
          "a********@usv.com". Ansatz lets me send him an email directly to his inbox while still keeping his address private.
          If he chooses to respond, then I'll know his real email address. 
        </p>

        To find someone, <a href="/auth/google">login w/ your Gmail account</a>

      {% else %}
        Welcome {{ get_current_user_name() }}

        <form class="form-horizontal" action="/" method="GET">
          <div class="form-group">
            <label for="inputEmail3" class="col-sm-2 control-label">Name</label>
            <div class="col-sm-10">
              <input type="text" class="form-control" name="name" placeholder="Alexander Pease">
            </div>
          </div>
          
          <div class="form-group">
            <label for="inputPassword3" class="col-sm-2 control-label">Domain</label>
            <div class="col-sm-10">
              <input type="text" class="form-control" name="domain" placeholder="usv.com">
            </div>
          </div>

          <div class="form-group">
            <div class="col-sm-offset-2 col-sm-10">
              <button type="submit" class="btn btn-primary">Search</button>
            </div>
          </div>
        </form>

        {% if results %}
        <table class="table table-striped">
          <tr>
            <th>Name</th>
            <th>Email Him/Her Directly Through Ansatz!</th>
          </tr>
          {% for r in results %}
            <tr>
              <td>{{ r.name }} ({{ email_obscure(r.email) }})</td>
              <td><a href="mailto:{{ r.email_obscured }}@ansatz.me" target="_blank">{{ r.email_obscured }}@ansatz.me</a></td>
            </tr>
          {% end %}
        </table>
        {% end %}
      {% end %}
    </div><!--col-md-6-->
  </div><!--row-->
{% end %}

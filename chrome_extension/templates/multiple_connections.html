<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css">

<div style="margin-top:10px;">
  Showing {{show_num}} of {{total_num}} connections
</div>

<table class="table table-hover">
  <tbody>
    {{#connections}}
      <tr profile-email="{{ email }}"><td profile-email="{{ email }}">
        {{name}}</br>
        {{#email_name}}{{email_name}}<span style="color:#6d6d6d;">@{{email_domain}}</span>{{/email_name}}{{^email_name}}{{email}}{{/email_name}}
      </td></tr>
    {{/connections}}
    {{^connections}}
    <tr><td>
      No connections found
    </td></tr>
    {{/connections}}
  </tbody>
</table>

<!-- Hidden div holds email address of selected row -->
<div id="selected-domain" style="display:none"></div>

<div>
  <a href="{{url}}">Click here</a> to see all connections
</div>

<div style="margin-top:10px;"> 
    Search Ansatz
    </br>
    <form role="form">
        <div class="form-group">
            <input type="search" name="name" id="search_name" placeholder="Name">
        </div>
        <div class="form-group">
            <input type="search" name="domain" id="search_domain" placeholder="Domain">
        </div>
        <button type="button" class="btn btn-primary" id="search_button">Search</button> 
    </form>
</div>

<script>
  $('#search_button').click(function(){
    console.log('Search button clicked');
    var event = document.createEvent('Event');
    event.initEvent('search');
    document.dispatchEvent(event);
  });

  $('td').click(function(){
    console.log('Row selected');
    var email = $(this).attr('profile-email')
    console.log(email);
    $('#selected-domain').attr('profile-email', email);
    var event = document.createEvent('Event');
    event.initEvent('rowClicked');
    document.dispatchEvent(event);
  });

  function send_search(){
    
  }
/*
  $('tr').hover(
    function(){ $(this).addClass("active")}, 
    function(){ $(this).removeClass("active")}
  );
*/
</script>